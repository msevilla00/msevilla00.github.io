<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Miguel Sevilla-Callejo">
  <title>Scripting</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="./reveal-js/css/reveal.css">
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="./reveal-js/css/theme/personal1.css" id="theme">
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? './reveal-js/css/print/pdf.css' : './reveal-js/css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <!--[if lt IE 9]>
  <script src="./reveal-js/lib/js/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section>
  <h1 class="title">Scripting</h1>
  <h1 class="subtitle">Automatizando procesos</h1>
  <h2 class="author">Miguel Sevilla-Callejo</h2>
  <h3 class="date">Enero 2019</h3>
</section>

<section><section id="scripting" class="titleslide slide level1" data-background="#007FFF"><h1>Scripting</h1></section><section id="script" class="slide level2">
<h1>Script</h1>
<h3>
Guión de secuencias
</h3>
<ul>
<li><strong>Script</strong>: es programa escrito para un entorno en tiempo de ejecución</li>
<li>Permite automatizar la ejecución de una o varias tareas</li>
<li>Desde comienzos de la informática (años 60)</li>
<li>Es una lista de instrucciones a ejecutar por el ordenador</li>
</ul>
<h3 id="ejemplo-de-comando">Ejemplo de comando:</h3>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># conjunto de comandos</span>
<span class="ot">var=$(</span><span class="kw">ls</span><span class="ot">)</span>
<span class="kw">echo</span> <span class="ot">$var</span>
<span class="kw">mv</span> nombre_archivo0 nombre_archivo1</code></pre></div>
</section><section id="ventajas-de-usar-scripts" class="slide level2">
<h1>Ventajas de usar scripts</h1>
<ul>
<li>Manipulación rápida de archivos</li>
<li>Control de la ejecución de programas</li>
<li>Abrir simultáneamente varios procesos</li>
<li>Flexibilidad en el análisis de datos</li>
</ul>
<iframe src="https://giphy.com/embed/BmmfETghGOPrW" width="480" height="206" frameBorder="0" class="giphy-embed" allowFullScreen>
</iframe>
<p>
<small><a href="https://giphy.com/gifs/reaction-BmmfETghGOPrW">via GIPHY</a></small>
</p>
</section><section id="editar-un-script" class="slide level2">
<h1>Editar un script</h1>
<p>Un script está escrito en texto plano</p>
<ul>
<li>Editor de texto (avanzado)</li>
<li>Interfaz de desarrollo: IDE</li>
</ul>
<p>Tener cuidado con saltos de línea y codificación entre sistemas operativos</p>
</section></section>
<section><section id="lenguajes" class="titleslide slide level1" data-background="#007FFF"><h1>Lenguajes</h1></section><section id="diferencias" class="slide level2">
<h1>Diferencias</h1>
<p><strong>Intérpretes de comandos</strong></p>
<ul>
<li>Comandos de la consola</li>
<li>Command Line Interface --&gt; CLI</li>
<li>[vs. Graphical User Interface --&gt; GUI]</li>
</ul>
<p><strong>Lenguajes de programación</strong></p>
<ul>
<li>Python, C++, JAVA, R, ...</li>
</ul>
</section><section id="consola-de-comandos" class="slide level2">
<h1>Consola de comandos</h1>
<ul>
<li>Depende del sistema operativo</li>
<li>CTRL+T en Linux</li>
</ul>
<figure>
<img src="images/20190128141544408.png" />
</figure>
</section><section id="bash" class="slide level2">
<h1>Bash</h1>
<figure>
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Gnu-bash-logo.svg/300px-Gnu-bash-logo.svg.png" />
</figure>
<ul>
<li>Bash (Bourne-again shell)</li>
<li>Intérprete de comando básico de la CLI</li>
<li>Lenguaje de consola de sistemas &quot;nix&quot;</li>
<li>GNU/Linux y macOS</li>
</ul>
<p><small><a href="https://es.wikipedia.org/wiki/Bash">Bash - Wikipedia, la enciclopedia libre</a></small></p>
</section><section id="powershell" class="slide level2">
<h1>PowerShell</h1>
<figure>
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/PowerShell_5.0_icon.png/150px-PowerShell_5.0_icon.png" />
</figure>
<ul>
<li>Windows PowerShell</li>
<li>Interprete de consola avanzado de Windows</li>
</ul>
<p><small><a href="https://es.wikipedia.org/wiki/Windows_PowerShell">Windows PowerShell - Wikipedia, la enciclopedia libre</a></small></p>
</section></section>
<section><section id="trabajando-con-bash" class="titleslide slide level1" data-background="#007FFF"><h1>Trabajando con bash</h1></section><section id="hello-world" class="slide level2">
<h1>Hello World</h1>
<p>Código</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">echo</span> <span class="st">&quot;Hola Mundo&quot;</span></code></pre></div>
</section><section id="principales-comandos" class="slide level2">
<h1>Principales comandos</h1>
<ul>
<li><code>cd</code> - cambiar de directorio</li>
<li><code>ls</code> - listar directorio</li>
<li><code>mkdir</code> - crear directorio</li>
<li><code>rm</code> - eliminar archivo</li>
</ul>
<p>Se acompañan de diferentes opciones</p>
<ul>
<li><a href="https://www.gnu.org/software/bash/manual/">GNU Bash manual - GNU Project - Free Software Foundation</a></li>
<li><a href="https://ss64.com/bash/">An A-Z Index of the Linux command line | SS64.com</a></li>
</ul>
</section><section id="ayuda" class="slide level2">
<h1>Ayuda</h1>
<ul>
<li><code>nombrecomando --help</code> - ayuda rápida</li>
<li><code>man nombrecomando</code> - manual interno de Linux</li>
</ul>
<p>Buscar ayuda en la red</p>
</section><section id="script-de-bash" class="slide level2">
<h1>Script de Bash</h1>
<p>Configurar correctamente la cabecera del script</p>
<p><code>#!/usr/bin/env bash</code></p>
<p><code>#!/bin/bash</code></p>
<p>Archivo con extensión <code>.sh</code> (shell)</p>
</section><section id="correr-un-script" class="slide level2">
<h1>Correr un script</h1>
<p>Darle propiedades de ejecución al archivo</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">chmod</span> +x nombre_script.sh</code></pre></div>
<p>Correr script en consola:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">./nombre_script.sh</span></code></pre></div>
<p><small>Lo anterior se puede realizar desde GUI en el explorador de archivos</small></p>
</section><section id="bucle-if" class="slide level2">
<h1>Bucle <strong>if</strong></h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">for</span> <span class="kw">i</span> in <span class="ot">$(</span><span class="kw">ls</span> *.md<span class="ot">)</span><span class="kw">;</span>
    <span class="kw">do</span>
    <span class="kw">echo</span> item: <span class="ot">$i</span>
    <span class="kw">pandoc</span> -t revealjs -V revealjs-url=./reveal-js -s <span class="ot">$i</span> -o <span class="ot">$i</span>.html
<span class="kw">done</span></code></pre></div>
</section><section id="bucle-while" class="slide level2">
<h1>Bucle <strong>while</strong></h1>
</section></section>
<section><section id="ogr-y-gdal" class="titleslide slide level1" data-background="#007FFF"><h1>OGR Y GDAL</h1></section><section id="referencias" class="slide level2">
<h1>Referencias</h1>
<ul>
<li><p>GDAL main web page <a href="http://www.gdal.org/index.html" class="uri">http://www.gdal.org/index.html</a></p></li>
<li><p><strong>Mitchel, T.; GDAL Developers 2015.</strong> <em>GeoSpatial Power Tools. GDAL Raster &amp; Vector Commands</em>. Locate Press</p></li>
</ul>
</section><section id="warp" class="slide level2">
<h1>warp</h1>
<ul>
<li>reproject, resample &amp; clip</li>
</ul>
<p>man gdalwarp - <a href="http://www.gdal.org/gdalwarp.html" class="uri">http://www.gdal.org/gdalwarp.html</a></p>
</section><section id="warp---reproject" class="slide level2">
<h1>warp - reproject</h1>
<p>Comando base</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">gdalwarp</span> -s\_srs EPSG:4326 -t\_srs EPSG:25830 -r cubic  -overwrite -of
<span class="kw">GTiff</span>  /home/user/data/1km.tif
<span class="kw">/home/miguel/GISData/Pyrenees/layers/raster</span>/<span class="kw">gtopo</span>\_epsg25830.tif</code></pre></div>
</section><section id="warp---resample" class="slide level2">
<h1>warp - resample</h1>
<p>Comando base</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">gdalwarp</span> -overwrite -r bilinear -tr 1000 1000 -of GTiff <span class="st">&quot;/tmp/00_Pluv.asc&quot;</span> /tmp/pluvio1km2.tif</code></pre></div>
<p><code>-tr</code> resolución en x e y</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">gdalwarp</span> -overwrite -r bilinear -ts 500 500 -of GTiff /folder/raster_in.asc /folder/raster_out_100m_res.tif</code></pre></div>
<p><code>-ts</code> es para definir el numero de píxeles del raster final 500x500</p>
<h3 id="warp---clip">warp - clip</h3>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">gdalwarp</span> -q -cutline
<span class="kw">/home/user/data/polygon.shp</span>
<span class="kw">-crop_to_cutline</span> -of GTiff <span class="st">&quot;/home/user/data/dem.tif&quot;</span>
<span class="kw">/home/user_data/output_dem.tif</span></code></pre></div>
</section><section id="gdalbuildvrt" class="slide level2">
<h1>gdalbuildvrt</h1>
<p>Ejemplo de creación de un ráster virtual:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">gdal2tiles.py</span> virtualrasterfinename.vrt inputraster1.tif inputraster2.tif inputraster3.tif</code></pre></div>
<p>Se puede usar el comodín en las entrada de archivos ráster: <code>srtm_12_0*.tif</code></p>
</section><section id="editando" class="slide level2">
<h1>... EDITANDO</h1>
</section></section>
    </div>
  </div>

  <script src="./reveal-js/lib/js/head.min.js"></script>
  <script src="./reveal-js/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Transition style
        transition: 'convex', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
          { src: './reveal-js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: './reveal-js/plugin/zoom-js/zoom.js', async: true },
          { src: './reveal-js/plugin/notes/notes.js', async: true }
        ]
      });
    </script>
    </body>
</html>
